<table class="table table-responsive table-condensed">
	<thead>
		<tr>
			<th class="col-md-1">Date</th>
			<th class="col-md-1 hidden-print">Type</th>
			<th class="col-md-1">For</th>
			<th class="col-md-1">From</th>
			<th class="col-md-1">To</th>
			<th class="col-md-1 text-right">Amount</th>
			<th class="col-md-1 text-right">Share</th>
			<th class="col-md-1 text-right">Debit</th>
			<th class="col-md-1 text-right">Credit</th>
			<th class="col-md-1 text-right">Balance</th>
		</tr>
	</thead>
	<tbody>
		<% running_balance = 0 %>
		<% @transactions.each do |t| %>
			<tr>
				<td><%= browser_date(t.occurred_on || t.created_at) %></td>
				<td class="hidden-print"><%= t.entry_type %></td>
				<td><%= t.journal.for %></td>
				<td><%= t.journal.payer_account.account_name %></td>
				<td><%= t.journal.payee_account.account_name %></td>
				<td class="text-right"><%= number_to_currency(t.journal.amount) %></td>
				<td class="text-right"><%= number_to_percentage(t.allocation_factor * 100, precision: 1) if t.entry_type == "allocation" %></td>
				<td class="text-right"><%= number_to_currency(t.debit) %></td>
				<td class="text-right"><%= number_to_currency(t.credit) %></td>
				<% running_balance = running_balance + (t.credit || 0) - (t.debit || 0) %>
				<td class="text-right"><%= number_to_currency(running_balance) %></td>
			</tr>
		<% end %>		
	</tbody>
</table>
<table class="table table-responsive table-condensed">
	<tfoot>
		<tr class="summary-row">
			<td class="h4 col-md-3">Current Balance</td>
			<td class="hidden-print col-md-1"></td>
			<td class="h4 col-md-8 text-right"><%= number_to_currency(running_balance) %></td>
		</tr>
	</tfoot>
</table>